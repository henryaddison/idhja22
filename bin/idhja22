#!/usr/bin/env ruby

require 'thor'
require 'idhja22'

class TrainAndValidate < Thor
  desc "train_and_validate FILE", "train a tree for the given file and validate is against a validation set"
  method_option :"training-proportion", :type => :numeric, :default => 1.0, :aliases => 't'
  def train_and_validate(filename)
    t, v = Idhja22::Tree.train_and_validate_from_csv(filename, options[:"training-proportion"])
    puts t.get_rules
    puts "Against validation set probability of successful classifiction: #{v}" if options[:"training-proportion"] < 1.0
  end
end

TrainAndValidate.start